#!/usr/bin/python3

import socket
import sys


def check_port(ipaddr, port):

    try:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        result = sock.connect_ex((ipaddr, port))
        if result == 0:
            print(f'{ipaddr}:{port} is open')
    except Exception as e:
        print(str(e))
    finally:
        sock.close()


def main():
    for i in range(0, 1024):
        check_port(sys.argv[1], i)


if __name__ == '__main__':
    if len(sys.argv) == 2:
        main()
    else:
        print(f'Usage : {sys.argv[0]} <ipaddress>')
